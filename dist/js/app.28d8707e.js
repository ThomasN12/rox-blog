(function(){"use strict";var t={8604:function(t,e,s){var r=s(6369),a=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("NavbarMenu"),e("router-view",{key:t.$route.path})],1)},i=[],o=function(){var t=this,e=t._self._c;return e("div",[e("b-navbar",{attrs:{toggleable:"lg",type:"info",variant:"dark"}},[e("b-navbar-brand",{attrs:{href:t.isLoggedIn?"/articles":"/"}},[t._v("Rox Blog")]),e("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),e("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[e("b-navbar-nav",[e("b-nav-item",{attrs:{href:"/"}},[t._v("Home")]),e("b-nav-item",{attrs:{href:"/users"}},[t._v("Bloggers")]),e("b-nav-item-dropdown",{attrs:{text:"Articles",right:""}},[t.isLoggedIn?e("b-dropdown-item",{attrs:{href:"/articles/new"}},[t._v("Create new article")]):t._e(),e("b-dropdown-item",{attrs:{href:"/articles"}},[t._v("View articles")])],1),e("b-nav-item-dropdown",{attrs:{text:"Categories",right:""}},[t.isLoggedIn&&t.currentUserInfo.admin?e("b-dropdown-item",{attrs:{href:"/categories/new"}},[t._v("Create new category")]):t._e(),e("b-dropdown-item",{attrs:{href:"/categories"}},[t._v("View categories")])],1),t.isLoggedIn?e("b-nav-item-dropdown",{attrs:{text:(t.currentUserInfo.admin?"(Admin) ":"")+`Profile [${t.currentUserInfo.username}]`,right:""}},[e("b-dropdown-item",{attrs:{href:`/users/${t.currentUserInfo.id}`}},[t._v("View your profile")]),e("b-dropdown-item",{attrs:{href:`/users/${t.currentUserInfo.id}/edit`}},[t._v("Edit your profile")])],1):t._e(),t.isLoggedIn?e("b-nav-item",{on:{click:t.logoutHandler}},[t._v("Logout")]):t._e(),t.isLoggedIn?e("b-nav-item",{attrs:{href:`/users/${t.currentUserInfo.id}`}},[t._v(t._s(t.currentUserInfo.username))]):t._e(),t.isLoggedIn?t._e():e("b-nav-item",{attrs:{href:"/login"}},[t._v("Login")]),t.isLoggedIn?t._e():e("b-nav-item",{attrs:{href:"/signup"}},[t._v("Sign up")])],1),e("b-navbar-nav",{staticClass:"ml-auto"},[e("b-nav-form",[e("b-form-input",{staticClass:"mr-sm-2",attrs:{size:"sm",placeholder:"Search"}}),e("b-button",{staticClass:"my-2 my-sm-0",attrs:{size:"sm",type:"submit",variant:"success"}},[t._v("Search")])],1)],1)],1)],1)],1)},n=[],c=s(3822),l={methods:{...(0,c.nv)({logout:"logout"}),async logoutHandler(){const t=await this.logout();t.success&&(localStorage.removeItem("token_user"),this.$router.push("/login"),this.$toasted.success(t.message))}},computed:{...(0,c.Se)({isLoggedIn:"isLoggedIn",currentUserInfo:"currentUserInfo"})}},d=l,u=s(1001),m=(0,u.Z)(d,o,n,!1,null,"29ffbf06",null),g=m.exports,p={name:"App",components:{NavbarMenu:g}},f=p,h=(0,u.Z)(f,a,i,!1,null,null,null),v=h.exports,b=s(5996),y=s(9425),C=(s(7024),function(){var t=this,e=t._self._c;return e("div",{staticClass:"container mt-5"},[e("div",[e("b-jumbotron",{staticClass:"text-center text-black my-jumbotron",scopedSlots:t._u([{key:"header",fn:function(){return[t._v("Rox Blog")]},proxy:!0},{key:"lead",fn:function(){return[t._v(" Welcome to Rox Blog! This is where you can share your stories ")]},proxy:!0}])},[e("hr",{staticClass:"my-4"}),e("p",[t._v("Click here to begin!")]),t.isLoggedIn?e("b-button",{attrs:{size:"lg",variant:"success",href:"/articles"}},[t._v("To articles")]):e("b-button",{attrs:{size:"lg",variant:"success",href:"/signup"}},[t._v("Sign up!")])],1)],1)])}),_=[],I={computed:{...(0,c.Se)({isLoggedIn:"isLoggedIn"})}},w=I,x=(0,u.Z)(w,C,_,!1,null,"4c197c70",null),U=x.exports,L=function(){var t=this,e=t._self._c;return e("ArticlesPartial",{attrs:{articles:t.listArticle}})},$=[],A=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("h1",{staticClass:"text-center mt-4"},[t._v("Articles")]),t._l(t.articles,(function(s){return e("div",{key:s.id,staticClass:"row d-flex justify-content-center mt-4"},[e("b-card",{staticClass:"col-8 text-center shadow mb-5 bg-white rounded px-0",attrs:{"no-body":""}},[e("b-card-header",{staticClass:"font-italic"},[t._v("by "),e("a",{attrs:{href:`/users/${t.getUserId(s)}`}},[t._v(t._s(t.userInfo&&t.userInfo.username||s.user.username))]),e("div",{staticClass:"mt-2"},t._l(s.categories,(function(s){return e("b-badge",{key:s.id,staticClass:"mx-1",attrs:{pill:"",variant:"info",href:`/categories/${s.id}`}},[t._v(t._s(s.name))])})),1)]),e("b-card-body",{staticClass:"text-center p-0"},[e("b-card-title",{staticClass:"mt-3"},[e("a",{staticClass:"text-success",attrs:{href:"/articles/"+s.id}},[t._v(t._s(s.title))])]),e("b-card-text",[t._v(" "+t._s(s.description)+" ")]),e("div",{staticClass:"mb-3"},[e("b-button",{attrs:{variant:"primary mx-2",href:`/articles/${s.id}`}},[t._v("View")]),t.checkIsAuthorized(s)?e("span",[e("b-button",{attrs:{variant:"info mx-2",href:`/articles/${s.id}/edit`}},[t._v("Edit")]),e("b-button",{attrs:{variant:"danger mx-2"},on:{click:function(e){return t.deleteHandler(s.id)}}},[t._v("Delete")])],1):t._e()],1)],1),e("b-card-footer",{staticClass:"font-italic"},[e("small",[t._v("Created at "),e("timeago",{attrs:{datetime:s.created_at,"auto-update":60}}),t._v(", Edited at "),e("timeago",{attrs:{datetime:s.updated_at,"auto-update":60}})],1)])],1)],1)}))],2)},S=[],B={props:{articles:Array,userInfo:Object},data(){return{}},methods:{...(0,c.nv)({getListArticle:"getListArticle",deleteArticleById:"deleteArticleById"}),async deleteHandler(t){let e={id:t};const s=await this.deleteArticleById(e);s.success&&(this.$toasted.success(s.message),this.$router.push("/articles")),this.getListArticle()},getUserId(t){return this.userInfo&&this.userInfo.id||t.user.id},checkIsAuthorized(t){const e=this.getUserId(t);return this.isLoggedIn&&(this.currentUserInfo.id===e||this.currentUserInfo.admin)}},computed:{...(0,c.Se)({isLoggedIn:"isLoggedIn",currentUserInfo:"currentUserInfo"})}},k=B,j=(0,u.Z)(k,A,S,!1,null,null,null),P=j.exports,E={components:{ArticlesPartial:P},async created(){await this.getListArticle()},data(){return{}},computed:{...(0,c.Se)({listArticle:"listArticle"})},methods:{...(0,c.nv)({getListArticle:"getListArticle",deleteArticleById:"deleteArticleById"})}},Z=E,H=(0,u.Z)(Z,L,$,!1,null,null,null),q=H.exports,z=function(){var t=this,e=t._self._c;return e("div",[e("h1",{staticClass:"text-center mt-4"},[t._v(t._s(t.article.title))]),e("div",{staticClass:"row d-flex justify-content-center mt-4"},[e("b-card",{staticClass:"col-6 text-center shadow mb-5 bg-white rounded px-0",attrs:{"no-body":""}},[e("b-card-header",{staticClass:"font-italic"},[t._v("by "),e("a",{attrs:{href:`/users/${t.article.user.id}`}},[t._v(t._s(t.article.user.username))]),e("div",[e("v-gravatar",{attrs:{email:t.article.user.email,alt:t.article.user.username,size:75}})],1),e("div",{staticClass:"mt-2"},t._l(t.article.categories,(function(s){return e("b-badge",{key:s.id,staticClass:"mx-1",attrs:{pill:"",variant:"info",href:`/categories/${s.id}`}},[t._v(t._s(s.name))])})),1)]),e("b-card-body",[e("b-card-text",{staticClass:"text-left"},[t._v(" "+t._s(t.article.description)+" ")]),t.checkIsAuthorized(t.article)?e("div",{staticClass:"mb-3"},[e("b-button",{attrs:{variant:"info mx-2",href:`/articles/${t.article.id}/edit`}},[t._v("Edit")]),e("b-button",{attrs:{variant:"danger mx-2"},on:{click:function(e){return t.deleteHandler(t.article.id)}}},[t._v("Delete")])],1):t._e()],1),e("b-card-footer",{staticClass:"font-italic"},[e("small",[t._v("Created at "),e("timeago",{attrs:{datetime:t.article.created_at,"auto-update":60}}),t._v(", Edited at "),e("timeago",{attrs:{datetime:t.article.updated_at,"auto-update":60}})],1)])],1)],1)])},T=[],N={created(){const t={id:this.id};this.getArticleById(t)},data(){return{id:this.$route.params.id}},methods:{...(0,c.nv)({getArticleById:"getArticleById",deleteArticleById:"deleteArticleById"}),checkIsAuthorized(t){return this.isLoggedIn&&(this.currentUserInfo.id===t.user.id||this.currentUserInfo.admin)},async deleteHandler(t){let e={id:t};const s=await this.deleteArticleById(e);s.success&&(this.$toasted.success(s.message),this.$router.push("/articles"))}},computed:{...(0,c.Se)({article:"articleById",isLoggedIn:"isLoggedIn",currentUserInfo:"currentUserInfo"})}},O=N,D=(0,u.Z)(O,z,T,!1,null,null,null),R=D.exports,M=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[t._m(0),e("div",{staticClass:"row justify-content-center bg-info rounded shadow"},[e("form",{staticClass:"col-10 mt-4",on:{submit:function(e){return e.preventDefault(),t.submitHandler.apply(null,arguments)}}},[e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-2 col-form-label fs-3",attrs:{for:""}},[t._v("Title")]),e("div",{staticClass:"col-10"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"input-group rounded shadow",attrs:{type:"text",name:"",id:"",placeholder:"Title of article"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})])]),e("div",{staticClass:"form-group row rounded"},[e("label",{staticClass:"col-2 col-form-label fs-3",attrs:{for:""}},[t._v("Description")]),e("div",{staticClass:"col-10"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"form-control shadow",attrs:{name:"",id:"",cols:"30",rows:"10",placeholder:"Description of article"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}})])]),e("div",{staticClass:"form-group row rounded"},[e("label",{staticClass:"col-2 col-form-label fs-3",attrs:{for:""}},[t._v("Category")]),e("div",{staticClass:"col-10"},[e("b-form-select",{staticClass:"custom-select rounded shadow",attrs:{options:t.categories,multiple:"","select-size":4},model:{value:t.selectedCategories,callback:function(e){t.selectedCategories=e},expression:"selectedCategories"}})],1)]),e("div",{staticClass:"form-group row justify-content-center"},[e("div",{staticClass:"col-3 d-flex justify-content-between"},[e("b-button",{attrs:{type:"submit",variant:"success"}},[t._v("Create")]),e("b-button",{attrs:{href:"/articles",variant:"warning"}},[t._v("Return")])],1)])])])])},V=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-center mt-4"},[e("h1",[t._v("Create new article")])])}],Y={async created(){if(this.isLoggedIn){const t=await this.getListCategory();if(t.success){const e=t.data.categories.map((t=>({value:t.id,text:t.name})));this.categories=this.categories.concat(e)}}else this.$router.push("/login"),this.$toasted.success("You must be logged in to perform that action")},methods:{...(0,c.nv)({createArticle:"createArticle",getListCategory:"getListCategory"}),async submitHandler(){const t={title:this.title,description:this.description,category_ids:this.selectedCategories};this.isLoading=!0;const e=await this.createArticle(t);if(e.success){this.isLoading=!1;const{article:t}=e.data;console.log(t),this.$toasted.success(e.message),this.$router.push(`/articles/${t.id}`)}else this.isLoading=!1;console.log(e)}},data(){return{title:"",description:"",categories:[{value:"",text:"Please select a category (can be empty)",disabled:!0}],selectedCategories:[]}},computed:{...(0,c.Se)({isLoggedIn:"isLoggedIn"})}},F=Y,G=(0,u.Z)(F,M,V,!1,null,"5141fdcd",null),J=G.exports,W=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[t._m(0),e("div",{staticClass:"row justify-content-center bg-info rounded shadow"},[e("form",{staticClass:"col-10 mt-4",on:{submit:function(e){return e.preventDefault(),t.submitHandler.apply(null,arguments)}}},[e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-2 col-form-label fs-3",attrs:{for:""}},[t._v("Title")]),e("div",{staticClass:"col-10"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"input-group rounded shadow",attrs:{type:"text",name:"",id:"",placeholder:"Title of article"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})])]),e("div",{staticClass:"form-group row rounded"},[e("label",{staticClass:"col-2 col-form-lable fs-3",attrs:{for:""}},[t._v("Description")]),e("div",{staticClass:"col-10"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"form-control shadow",attrs:{name:"",id:"",cols:"30",rows:"10",placeholder:"Description of article"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}})])]),e("div",{staticClass:"form-group row rounded"},[e("label",{staticClass:"col-2 col-form-label fs-3",attrs:{for:""}},[t._v("Category")]),e("div",{staticClass:"col-10"},[e("b-form-select",{staticClass:"custom-select rounded shadow",attrs:{options:t.categories,multiple:"","select-size":4},model:{value:t.selectedCategories,callback:function(e){t.selectedCategories=e},expression:"selectedCategories"}})],1)]),e("div",{staticClass:"form-group row justify-content-center"},[e("div",{staticClass:"col-4 d-flex justify-content-between"},[e("b-button",{attrs:{type:"submit",variant:"success"}},[t._v("Save")]),e("b-button",{attrs:{href:"/articles",variant:"warning"}},[t._v("Return")])],1)])])])])},X=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-center mt-4"},[e("h1",[t._v("Edit article")])])}],K={async created(){let t=parseInt(this.$route.params.id);const e={id:t},s=await this.getArticleById(e);if(s.success){this.article.user.id===this.currentUserInfo.id||this.currentUserInfo.admin||(this.$router.push(`/articles/${t}`),this.$toasted.success("You can only edit your own article"));const e=await this.getListCategory();if(e.success){const t=e.data.categories.map((t=>({value:t.id,text:t.name})));this.categories=this.categories.concat(t)}const{title:r,description:a,categories:i}=s.data.article;this.title=r,this.description=a,console.log(i),i.forEach((t=>{this.selectedCategories.push(t.id)})),console.log(this.selectedCategories)}else console.log("ERROR")},data(){return{title:"",description:"",categories:[{value:"",text:"Please select a category (can be empty)",disabled:!0}],selectedCategories:[]}},methods:{...(0,c.nv)({getArticleById:"getArticleById",updateArticle:"updateArticleById",getListCategory:"getListCategory"}),async submitHandler(){console.log("SUBMIT!");const t={title:this.title,description:this.description,id:this.$route.params.id,category_ids:this.selectedCategories},e=await this.updateArticle(t);e.success&&(this.$toasted.success(e.message),this.$router.push("/articles"))}},computed:{...(0,c.Se)({article:"articleById",currentUserInfo:"currentUserInfo"})}},Q=K,tt=(0,u.Z)(Q,W,X,!1,null,"d7e97940",null),et=tt.exports,st=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[t._m(0),e("div",{staticClass:"row justify-content-center bg-info rounded shadow"},[e("form",{staticClass:"col-10 mt-4",on:{submit:function(e){return e.preventDefault(),t.submitHandler.apply(null,arguments)}}},[e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-2 col-form-label fs-3",attrs:{for:"username"}},[t._v("Username")]),e("div",{staticClass:"col-10"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"input-group rounded shadow",attrs:{type:"text",name:"",id:"username",placeholder:"Enter a username"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})])]),e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-2 col-form-label fs-3",attrs:{for:"email"}},[t._v("Email")]),e("div",{staticClass:"col-10"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"input-group rounded shadow",attrs:{type:"text",name:"",id:"email",placeholder:"Enter your email address"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})])]),e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-2 col-form-label fs-3",attrs:{for:"password"}},[t._v("Password")]),e("div",{staticClass:"col-10"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input-group rounded shadow",attrs:{type:"password",name:"",id:"password",placeholder:"Choose a password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})])]),e("div",{staticClass:"form-group row justify-content-center"},[e("div",{staticClass:"col-3 d-flex justify-content-between"},[e("b-button",{attrs:{disabled:t.isLoading,type:"submit",variant:"success"}},[t.isLoading?e("b-spinner",{attrs:{small:""}}):t._e(),t._v(" Sign Up")],1),e("b-button",{attrs:{href:"/articles",variant:"warning"}},[t._v("Return")])],1)])])])])},rt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-center mt-4"},[e("h1",[t._v("Sign Up")])])}],at={methods:{...(0,c.nv)({signup:"signup",getCurrentUserInfo:"getCurrentUserInfo"}),async submitHandler(){console.log("SUBMIT!");const t={username:this.username,email:this.email,password:this.password},e=await this.signup(t);e.success?(this.isLoading=!1,localStorage.setItem("token_user",e.data.token),await this.getCurrentUserInfo(),this.$toasted.success(e.message),this.$router.push("/articles")):(this.$toasted.error(e.errors[0].message),this.isLoading=!1)}},data(){return{username:"",email:"",password:"",isLoading:!1}}},it=at,ot=(0,u.Z)(it,st,rt,!1,null,"14b2df08",null),nt=ot.exports,ct=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[t._m(0),e("div",{staticClass:"row justify-content-center bg-info rounded shadow"},[e("form",{staticClass:"col-10 mt-4",on:{submit:function(e){return e.preventDefault(),t.submitHandler.apply(null,arguments)}}},[e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-2 col-form-label fs-3",attrs:{for:"username"}},[t._v("Username")]),e("div",{staticClass:"col-10"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"input-group rounded shadow",attrs:{type:"text",name:"",id:"username",placeholder:"Enter a username"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})])]),e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-2 col-form-label fs-3",attrs:{for:"email"}},[t._v("Email")]),e("div",{staticClass:"col-10"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"input-group rounded shadow",attrs:{type:"text",name:"",id:"email",placeholder:"Enter your email address"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})])]),e("div",{staticClass:"form-group row justify-content-center"},[e("div",{staticClass:"col-4 d-flex justify-content-between"},[e("b-button",{attrs:{type:"submit",variant:"success"}},[t._v("Update")]),e("b-button",{attrs:{href:"/users",variant:"warning"}},[t._v("Return")])],1)])])])])},lt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-center mt-4"},[e("h1",[t._v("Edit Your Profile")])])}],dt={async created(){const t=parseInt(this.$route.params.id);this.currentUserInfo.id!==t&&(this.$router.push("/users"),this.$toasted.success("You can only edit your account"));let{username:e,email:s}=this.currentUserInfo;this.username=e,this.email=s},data(){return{username:"",email:"",id:this.$route.params.id}},methods:{...(0,c.nv)({signup:"signup",getUserInfo:"getUserInfo",updateUserInfo:"updateUserInfo",getCurrentUserInfo:"getCurrentUserInfo"}),async submitHandler(){const t={id:this.id,username:this.username,email:this.email},e=await this.updateUserInfo(t);e.success?(this.$toasted.success(e.message),await this.getCurrentUserInfo(),this.$router.push(`/users/${this.id}`)):this.$toasted.error(e.errors[0].message)}},computed:{...(0,c.Se)({currentUserInfo:"currentUserInfo"})}},ut=dt,mt=(0,u.Z)(ut,ct,lt,!1,null,"0d542ccf",null),gt=mt.exports,pt=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"text-center mt-4"},[e("h1",[t._v(t._s(t.username)+"'s profile")]),e("v-gravatar",{attrs:{email:t.email,alt:t.username,size:200}})],1),e("div",{staticClass:"text-center mt-4"},[t.isLoggedIn&&t.currentUserInfo.id===t.userInfo.id?e("b-button",{attrs:{variant:"info mx-2",href:`/users/${this.id}/edit`}},[t._v("Edit your profile")]):t._e()],1),e("ArticlesPartial",{attrs:{userInfo:t.userInfo,articles:t.articles}})],1)},ft=[],ht={components:{ArticlesPartial:P},async created(){console.log(this.currentUserInfo);const t={id:this.id},e=await this.getUserInfo(t);if(e.success){this.userInfo=e.data.user;let{username:t,email:s,articles:r}=this.userInfo;this.username=t,this.email=s,this.articles=r}},data(){return{username:"",email:"",articles:[],userInfo:{},id:parseInt(this.$route.params.id)}},methods:{...(0,c.nv)({getUserInfo:"getUserInfo",updateUserInfo:"updateUserInfo"})},computed:{...(0,c.Se)({isLoggedIn:"isLoggedIn",currentUserInfo:"currentUserInfo"})}},vt=ht,bt=(0,u.Z)(vt,pt,ft,!1,null,"6259b707",null),yt=bt.exports,Ct=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("h1",{staticClass:"text-center mt-4"},[t._v("Rox Bloggers")]),t._l(t.listUser,(function(s){return e("div",{key:s.id,staticClass:"row d-flex justify-content-center mt-4"},[e("b-card",{staticClass:"col-8 text-center shadow mb-5 bg-white rounded px-0",attrs:{"no-body":""}},[e("b-card-header",{staticClass:"font-italic",attrs:{href:`/users/${s.id}`}},[e("a",{attrs:{href:`/users/${s.id}`}},[t._v(t._s(s.username))])]),e("b-card-body",{staticClass:"text-center p-0"},[e("b-card-title",{staticClass:"mt-3"},[e("v-gravatar",{attrs:{email:s.email,alt:s.username,size:150}})],1),e("p",[t._v(" "+t._s(s.num_articles+" "+t.$pluralize("article",s.num_articles))+" ")]),e("div",{staticClass:"mb-3"},[e("b-button",{attrs:{variant:"primary mx-2",href:`/users/${s.id}`}},[t._v("View profile")]),t.isLoggedIn?e("span",[t.currentUserInfo.id===s.id?e("b-button",{attrs:{variant:"info mx-2",href:`/users/${s.id}/edit`}},[t._v("Edit profile")]):t._e(),t.currentUserInfo.admin?e("b-button",{attrs:{variant:"danger mx-2"},on:{click:function(e){return t.deleteUserHandler(s.id)}}},[t._v("Delete user")]):t._e()],1):t._e()],1)],1),e("b-card-footer",{staticClass:"font-italic"},[e("small",[t._v("Joined "),e("timeago",{attrs:{datetime:s.created_at,"auto-update":60}})],1)])],1)],1)}))],2)},_t=[],It={async created(){await this.getListUser()},data(){return{}},computed:{...(0,c.Se)({listUser:"listUser",isLoggedIn:"isLoggedIn",currentUserInfo:"currentUserInfo"})},methods:{...(0,c.nv)({getListUser:"getListUser",deleteUser:"deleteUser"}),async deleteUserHandler(t){if(console.log(t),confirm("Are you sure you want to delete this user account and all associated articles")){const e={id:t},s=await this.deleteUser(e);s.success&&this.$toasted.success(s.message),console.log(t)}}}},wt=It,xt=(0,u.Z)(wt,Ct,_t,!1,null,null,null),Ut=xt.exports,Lt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"h-50"},[e("h1",{staticClass:"text-center mt-4"},[t._v("Log in")]),e("div",{staticClass:"container"},[e("div",{staticClass:"row justify-content-center bg-info rounded shadow"},[e("form",{staticClass:"col-10 mt-4",on:{submit:function(e){return e.preventDefault(),t.submitLoginHandler.apply(null,arguments)}}},[e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-2 col-form-label fs-3",attrs:{for:"email"}},[t._v("Email")]),e("div",{staticClass:"col-10"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"input-group rounded shadow",attrs:{type:"text",name:"",id:"email",placeholder:"Enter your email address"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})])]),e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-2 col-form-label fs-3",attrs:{for:"password"}},[t._v("Password")]),e("div",{staticClass:"col-10"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input-group rounded shadow",attrs:{type:"password",name:"",id:"password",placeholder:"Enter your password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})])]),e("div",{staticClass:"form-group row justify-content-center"},[e("b-button",{attrs:{disabled:t.isLoading,type:"submit",variant:"success"}},[t.isLoading?e("b-spinner",{attrs:{small:""}}):t._e(),t._v(" Login")],1)],1)])])])])},$t=[],At={async created(){this.isLoggedIn&&this.$router.push(`users/${this.currentUserInfo.id}`)},data(){return{email:"",password:"",isLoading:!1}},methods:{...(0,c.nv)({login:"login",getCurrentUserInfo:"getCurrentUserInfo"}),async submitLoginHandler(){console.log("SUBMIT!");const t={username:this.username,email:this.email,password:this.password};this.isLoading=!0;const e=await this.login(t);e&&e.success?(this.isLoading=!1,localStorage.setItem("token_user",e.data.token),await this.getCurrentUserInfo(),this.$toasted.success(e.message),this.$router.push("/articles")):(this.$toasted.error(e.errors[0].message),this.isLoading=!1)}},computed:{...(0,c.Se)({isLoggedIn:"isLoggedIn",currentUserInfo:"currentUserInfo"})}},St=At,Bt=(0,u.Z)(St,Lt,$t,!1,null,"2cbb8ec6",null),kt=Bt.exports,jt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"h-50"},[e("h1",{staticClass:"text-center mt-4"},[t._v("Create a new category")]),e("div",{staticClass:"container"},[e("div",{staticClass:"row justify-content-center bg-info rounded shadow"},[e("form",{staticClass:"col-10 mt-4",on:{submit:function(e){return e.preventDefault(),t.submitHandler.apply(null,arguments)}}},[e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-2 col-form-label fs-3",attrs:{for:"name"}},[t._v("Category name")]),e("div",{staticClass:"col-10"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"input-group rounded shadow",attrs:{type:"text",name:"",id:"name",placeholder:"Enter a name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})])]),e("div",{staticClass:"form-group row justify-content-center"},[e("b-button",{attrs:{disabled:t.isLoading,type:"submit",variant:"success"}},[t.isLoading?e("b-spinner",{attrs:{small:""}}):t._e(),t._v(" Create Category")],1)],1)])])])])},Pt=[],Et={async created(){this.isLoggedIn&&this.currentUserInfo.admin||this.$router.push("/categories")},data(){return{isLoading:!1,name:""}},methods:{...(0,c.nv)({createCategory:"createCategory"}),async submitHandler(){const t={name:this.name};this.isLoading=!0;const e=await this.createCategory(t);if(e.success){this.isLoading=!1;const{category:t}=e.data;console.log(t),this.$toasted.success(e.message),this.$router.push("/categories")}else this.isLoading=!1;console.log(e)}},computed:{...(0,c.Se)({isLoggedIn:"isLoggedIn",currentUserInfo:"currentUserInfo"})}},Zt=Et,Ht=(0,u.Z)(Zt,jt,Pt,!1,null,"97108e50",null),qt=Ht.exports,zt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"h-50"},[e("h1",{staticClass:"text-center mt-4"},[t._v("Create a new category")]),e("div",{staticClass:"container"},[e("div",{staticClass:"row justify-content-center bg-info rounded shadow"},[e("form",{staticClass:"col-10 mt-4",on:{submit:function(e){return e.preventDefault(),t.submitHandler.apply(null,arguments)}}},[e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-2 col-form-label fs-3",attrs:{for:"name"}},[t._v("Edit category name")]),e("div",{staticClass:"col-10"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"input-group rounded shadow",attrs:{type:"text",name:"",id:"name",placeholder:"Enter a name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})])]),e("div",{staticClass:"form-group row justify-content-center"},[e("b-button",{attrs:{disabled:t.isLoading,type:"submit",variant:"success"}},[t.isLoading?e("b-spinner",{attrs:{small:""}}):t._e(),t._v(" Update Category")],1)],1)])])])])},Tt=[],Nt={async created(){if(this.isLoggedIn&&this.currentUserInfo.admin){const t=this.id,e={id:t},s=await this.getCategoryById(e),r=s.data.category;this.name=r.name}else this.$router.push("/categories")},data(){return{isLoading:!1,name:"",id:this.$route.params.id}},methods:{...(0,c.nv)({getCategoryById:"getCategoryById",updateCategoryById:"updateCategoryById"}),async submitHandler(){const t={id:this.id,name:this.name};this.isLoading=!0;const e=await this.updateCategoryById(t);if(e.success){this.isLoading=!1;const{category:t}=e.data;console.log(t),this.$toasted.success(e.message)}else this.isLoading=!1;console.log(e)}},computed:{...(0,c.Se)({isLoggedIn:"isLoggedIn",currentUserInfo:"currentUserInfo"})}},Ot=Nt,Dt=(0,u.Z)(Ot,zt,Tt,!1,null,"628b0634",null),Rt=Dt.exports,Mt=function(){var t=this,e=t._self._c;return e("div",[e("h1",{staticClass:"text-center mt-4"},[t._v(" Category: "+t._s(t.category?t.category.name:"")+" ")]),e("div",{staticClass:"text-center mt-4"},[t.isLoggedIn&&t.currentUserInfo.admin?e("b-button",{attrs:{variant:"info mx-2",href:`/categories/${this.id}/edit`}},[t._v("Edit category name")]):t._e()],1),e("ArticlesPartial",{attrs:{articles:t.category?t.category.articles:[]}})],1)},Vt=[],Yt={components:{ArticlesPartial:P},async created(){const t={id:this.id},e=await this.getCategoryById(t);e.success&&(this.category=e.data.category,console.log(this.category))},data(){return{id:this.$route.params.id,category:null}},methods:{...(0,c.nv)({getCategoryById:"getCategoryById"})},computed:{...(0,c.Se)({isLoggedIn:"isLoggedIn",currentUserInfo:"currentUserInfo"})}},Ft=Yt,Gt=(0,u.Z)(Ft,Mt,Vt,!1,null,null,null),Jt=Gt.exports,Wt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("h1",{staticClass:"text-center mt-4"},[t._v("Categories")]),t._l(t.categories,(function(s){return e("div",{key:s.id,staticClass:"row d-flex justify-content-center mt-4"},[e("b-card",{staticClass:"col-6 text-center shadow mb-5 bg-white rounded px-0",attrs:{"no-body":""}},[e("b-card-body",{staticClass:"text-center p-0"},[e("b-card-title",{staticClass:"mt-3"},[e("a",{staticClass:"text-success",attrs:{href:"/categories/"+s.id}},[t._v(t._s(s.name))])]),e("p",[t._v(" "+t._s(s.num_articles+" "+t.$pluralize("article",s.num_articles))+" ")])],1),e("b-card-footer",{staticClass:"font-italic"},[e("small",[t._v("Created at "),e("timeago",{attrs:{datetime:s.created_at,"auto-update":60}}),t._v(", Edited at "),e("timeago",{attrs:{datetime:s.updated_at,"auto-update":60}})],1)])],1)],1)}))],2)},Xt=[],Kt={async created(){const t=await this.getListCategory();t.success&&(this.categories=t.data.categories,console.log(this.categories))},data(){return{categories:[]}},methods:{...(0,c.nv)({getListCategory:"getListCategory"})},computed:{...(0,c.Se)({isLoggedIn:"isLoggedIn",currentUserInfo:"currentUserInfo"})}},Qt=Kt,te=(0,u.Z)(Qt,Wt,Xt,!1,null,null,null),ee=te.exports,se=s(2631);r["default"].use(se.Z);const re=[{path:"/",component:U},{path:"/login",name:"login form",component:kt},{path:"/articles",name:"list article",component:q,meta:{label:"list article"}},{path:"/articles/new",name:"create article",component:J},{path:"/articles/:id",name:"show article",component:R},{path:"/articles/:id/edit",name:"edit article",component:et},{path:"/signup",name:"sign up",component:nt},{path:"/users/:id",name:"show profile",component:yt},{path:"/users/:id/edit",name:"edit profile",component:gt},{path:"/users",name:"list user",component:Ut},{path:"/categories",name:"list category",component:ee},{path:"/categories/new",name:"create category",component:qt},{path:"/categories/:id",name:"show category",component:Jt},{path:"/categories/:id/edit",name:"edit category",component:Rt}],ae=new se.Z({mode:"history",base:"/",linkActiveClass:"active",scrollBehavior:()=>({y:0}),routes:re});var ie=ae,oe={set(t,[e,s]){t[e]=s}},ne={listArticle:t=>t.listArticle,articleById:t=>t.articleById,listUser:t=>t.listUser,currentUserInfo:t=>t.currentUserInfo,isLoggedIn:t=>t.isLoggedIn},ce=s(6265),le=s.n(ce);const de=le().create({baseURL:"https://rox-blog-backend.herokuapp.com/api",timeout:1e4,headers:{"Content-Type":"application/json"}});de.interceptors.request.use((t=>{const e=localStorage.getItem("token_user");return e?t.headers.Authorization=`Bearer ${e}`:delete de.defaults.headers.common.Authorization,t}),(t=>Promise.reject(t)));const ue={requestServer:de};var me={getListArticle({commit:t}){return ue.requestServer.get("/articles").then((e=>{const{data:s}=e;t("set",["listArticle",s.data.articles])})).catch((t=>{console.log(t)}))},async getArticleById({commit:t},e){const{id:s}=e;return ue.requestServer.get(`/articles/${s}`).then((e=>{const{data:s}=e;return t("set",["articleById",s.data.article]),s})).catch((t=>{console.log(t)}))},async createArticle({commmit:t},e){return ue.requestServer.post("/articles",e).then((t=>{const{data:e}=t;return e})).catch((t=>{console.log(t)}))},async updateArticleById({commit:t},e){const{id:s}=e;return ue.requestServer.patch(`/articles/${s}`,e).then((t=>{const{data:e}=t;return console.log(e),e})).catch((t=>{const e=t.response.data;return e}))},async deleteArticleById({commit:t},e){const{id:s}=e;return ue.requestServer["delete"](`/articles/${s}`).then((t=>{const{data:e}=t;return console.log(e),e})).catch((t=>{const e=t.response.data;return e}))},async signup({commit:t},e){return ue.requestServer.post("/signup",e).then((e=>{const{data:s}=e;return console.log(s),s.success&&t("set",["isLoggedIn",!0]),s})).catch((t=>{const e=t.response.data;return e}))},async login({commit:t},e){return ue.requestServer.post("/login",e).then((e=>{console.log(e);const{data:s}=e;return s.success&&t("set",["isLoggedIn",!0]),s})).catch((t=>{const e=t.response.data;return e}))},async logout({commit:t}){return await ue.requestServer["delete"]("/logout").then((e=>{const{data:s}=e;return s.success&&(t("set",["currentUserInfo",{}]),t("set",["isLoggedIn",!1])),s})).catch((t=>{const e=t.response.data;return e}))},async getListUser({commit:t}){return ue.requestServer.get("/users").then((e=>{const{data:s}=e;t("set",["listUser",s.data.users]),console.log(e)})).catch((t=>{const e=t.response.data;return e}))},async getCurrentUserInfo({commit:t},e){return ue.requestServer.get("/current_user").then((e=>{const{data:s}=e;return s.success&&t("set",["currentUserInfo",s.data.user]),s})).catch((t=>{const e=t.response.data;return e}))},async getUserInfo({commit:t},e){const{id:s}=e;return ue.requestServer.get(`/user_info/${s}`).then((t=>{const{data:e}=t;return console.log(e),e})).catch((t=>{console.log(t)}))},async updateUserInfo({commit:t},e){return ue.requestServer.patch("/update_account",e).then((t=>{const{data:e}=t;return e})).catch((t=>{const e=t.response.data;return e}))},async deleteUser({commit:t},e){const{id:s}=e;return ue.requestServer["delete"](`/users/${s}`,e).then((t=>{const{data:e}=t;console.log(e)})).catch((t=>{console.log(t)}))},async getListCategory({commit:t}){return ue.requestServer.get("/categories").then((t=>{const{data:e}=t;return e})).catch((t=>{console.log(t)}))},async getCategoryById({commit:t},e){const{id:s}=e;return ue.requestServer.get(`/categories/${s}`).then((t=>{const{data:e}=t;return e})).catch((t=>{console.log(t)}))},async createCategory({commmit:t},e){return ue.requestServer.post("/categories",e).then((t=>{const{data:e}=t;return e})).catch((t=>{console.log(t)}))},async updateCategoryById({commmit:t},e){const{id:s}=e;return ue.requestServer.patch(`/categories/${s}`,e).then((t=>{const{data:e}=t;return e})).catch((t=>{console.log(t)}))}},ge=s(2415),pe=s(9883),fe=s.n(pe);let he=new(fe())({isCompression:!1});r["default"].use(c.ZP);const ve=new c.ZP.Store({state(){return{listArticle:[],articleById:{},currentUserInfo:{},listUser:[],isLoggedIn:!1}},mutations:oe,getters:ne,actions:me,plugins:[(0,ge.Z)({storage:{key:"mykey",path:["isLoggedIn"],getItem:t=>he.get(t),setItem:(t,e)=>he.set(t,e),removeItem:t=>he.remove(t)}})]});var be=ve,ye=s(8260),Ce=s.n(ye),_e=s(6018),Ie=s(2806),we=s.n(Ie),xe=s(8735),Ue=s.n(xe),Le=s(5808),$e=s.n(Le),Ae=s(8413);r["default"].config.productionTip=!1,r["default"].use($e()),r["default"].use(b.XG7),r["default"].use(y.A7),r["default"].use(_e.Z),r["default"].use(Ue(),{position:"top-right",type:"success",duration:3e3,dismissible:!0}),r["default"].use(Ae.ZP,{name:"Timeago",locale:"en"}),r["default"].component("v-gravatar",Ce()),r["default"].component("paginate-component",we()),new r["default"]({router:ie,store:be,render:t=>t(v)}).$mount("#app")}},e={};function s(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,s),i.exports}s.m=t,function(){var t=[];s.O=function(e,r,a,i){if(!r){var o=1/0;for(d=0;d<t.length;d++){r=t[d][0],a=t[d][1],i=t[d][2];for(var n=!0,c=0;c<r.length;c++)(!1&i||o>=i)&&Object.keys(s.O).every((function(t){return s.O[t](r[c])}))?r.splice(c--,1):(n=!1,i<o&&(o=i));if(n){t.splice(d--,1);var l=a();void 0!==l&&(e=l)}}return e}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[r,a,i]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var r in e)s.o(e,r)&&!s.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,r){var a,i,o=r[0],n=r[1],c=r[2],l=0;if(o.some((function(e){return 0!==t[e]}))){for(a in n)s.o(n,a)&&(s.m[a]=n[a]);if(c)var d=c(s)}for(e&&e(r);l<o.length;l++)i=o[l],s.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return s.O(d)},r=self["webpackChunkrox_blog_frontend"]=self["webpackChunkrox_blog_frontend"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=s.O(void 0,[998],(function(){return s(8604)}));r=s.O(r)})();
//# sourceMappingURL=app.28d8707e.js.map